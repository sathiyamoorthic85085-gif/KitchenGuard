export function scriptInjector(config) {
    return {
        name: 'script-injector',
        enforce: 'post',
        apply: 'build',
        transformIndexHtml(html) {
            if (!config.enabled) {
                return html;
            }
            return {
                html,
                tags: [
                    {
                        tag: 'script',
                        attrs: {
                            defer: true,
                            'data-domain': config.domain,
                            src: config.src,
                        },
                        injectTo: 'head',
                    },
                ],
            };
        },
    };
}
